{"ast":null,"code":"import _objectSpread from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/ngadoan/Documents/my-app/src/components/recruimentPage/index.js\";\nimport React, { Component } from \"react\";\nimport Search from \"../Search\";\nimport RecrumentModal from './recrumentModal';\nimport RecruimentTable from './recruiment-table';\nimport PropTypes from 'prop-types';\nimport Fade from '@material-ui/core/Fade';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nvar RecuimentPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RecuimentPage, _Component);\n\n  function RecuimentPage(props) {\n    var _this;\n\n    _classCallCheck(this, RecuimentPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecuimentPage).call(this, props));\n\n    _this.getCareersInCareerGroup = function () {\n      var _this$state = _this.state,\n          searchParams = _this$state.searchParams,\n          career_groups = _this$state.career_groups;\n      var careers = [];\n\n      if (Number(searchParams.career_group) === -1) {\n        career_groups.forEach(function (item) {\n          careers = careers.concat(item.careers);\n        });\n      } else {\n        career_groups.forEach(function (item) {\n          if (searchParams.career_group === item.name) {\n            console.log(item.careers);\n            careers = careers.concat(item.careers);\n          }\n        });\n      }\n\n      return careers;\n    };\n\n    _this.getCareerGroups = function (result) {\n      var career_groups = [];\n      result.forEach(function (item) {\n        career_groups.push(item.name);\n      });\n      return career_groups;\n    };\n\n    _this.onHandleItemSelected = function (items) {\n      _this.setState({\n        selects: items\n      });\n    };\n\n    _this.handleOpenModal = function () {\n      if (_this.state.selects.length > 0) {\n        _this.setState({\n          openModal: true\n        });\n      }\n    };\n\n    _this.handleCloseModal = function () {\n      _this.setState({\n        openModal: false,\n        clearSelected: true\n      }, function () {\n        _this.setState({\n          clearSelected: false\n        });\n      });\n    };\n\n    _this.handleChangePage = function (event, index) {\n      var _this$state2 = _this.state,\n          page = _this$state2.page,\n          offset = _this$state2.offset,\n          limit = _this$state2.limit;\n\n      _this.setState({\n        offset: page > index ? offset - limit : limit + offset,\n        page: index\n      }, function () {\n        _this.getRecruimentsPerOffset();\n      });\n    };\n\n    _this.handleCareerGroupChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          career_group: event.target.value,\n          career: '-1'\n        }),\n        defaultValueCarrer: 'Tất cả'\n      }, function () {\n        _this.setState({\n          careers: _this.getCareersInCareerGroup()\n        });\n      });\n    };\n\n    _this.handleCareerChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          career: event.target.value\n        }),\n        defaultValueCarrer: event.target.value\n      });\n    };\n\n    _this.handleAddressChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          address: event.target.value\n        })\n      });\n    };\n\n    _this.handleSalaryChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          salary: event.target.value\n        })\n      });\n    };\n\n    _this.handleExpChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          exp: event.target.value\n        })\n      });\n    };\n\n    _this.handleTextChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          query: event.target.value\n        })\n      });\n    };\n\n    _this.onSearchClicked = function () {\n      var searchParams = _this.state.searchParams;\n      console.log('search params: ', searchParams);\n\n      _this.setState({\n        page: 0\n      }, function () {\n        _this.getRecruimentsPerOffset();\n      });\n    };\n\n    _this.onInputKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        var searchParams = _this.state.searchParams;\n        console.log('search params: ', searchParams);\n\n        _this.getRecruimentsPerOffset();\n      }\n    };\n\n    _this.handleChangePage = _this.handleChangePage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onHandleItemSelected = _this.onHandleItemSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      error: null,\n      isLoading: false,\n      items: [],\n      career_groups: [],\n      careers: [],\n      tinh_thphos: [],\n      selects: [],\n      limitSelect: 5,\n      openModal: false,\n      offset: 0,\n      limit: 10,\n      totalSize: 0,\n      page: 0,\n      searchParams: {\n        career_group: \"-1\",\n        career: \"-1\",\n        address: \"-1\",\n        salary: \"-1\",\n        exp: \"-1\",\n        query: \"\"\n      },\n      clearSelected: false\n    };\n    return _this;\n  }\n\n  _createClass(RecuimentPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getRecruimentsPerOffset();\n      fetch(\"http://127.0.0.1:5000/career_groups\", {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this2.setState({\n          career_groups: result.result\n        }, function () {\n          _this2.setState({\n            careers: _this2.getCareersInCareerGroup()\n          });\n        });\n      });\n      fetch(\"http://127.0.0.1:5000/tinh_tpho\", {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this2.setState({\n          tinh_thphos: result.result\n        });\n      });\n    }\n  }, {\n    key: \"getRecruimentsPerOffset\",\n    value: function getRecruimentsPerOffset() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          limit = _this$state3.limit,\n          page = _this$state3.page,\n          searchParams = _this$state3.searchParams;\n      var career_group = searchParams.career_group,\n          career = searchParams.career,\n          address = searchParams.address,\n          salary = searchParams.salary,\n          exp = searchParams.exp,\n          query = searchParams.query;\n      this.setState({\n        isLoading: true\n      });\n      fetch(\"http://127.0.0.1:5000/search_recruitments?limit=\" + limit + \"&page=\" + page + \"&career_group=\" + (career_group !== '-1' ? career_group : '') + \"&career=\" + (career !== '-1' ? career : '') + \"&address=\" + (address !== '-1' ? address : '') + \"&salary=\" + (salary !== '-1' ? salary : '') + \"&exp=\" + (exp !== '-1' ? exp : '') + \"&query=\" + query, {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this3.setState({\n          isLoading: false,\n          items: result.result,\n          totalSize: result.total_size\n        });\n      }, function (error) {\n        _this3.setState({\n          isLoading: false,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"handleClickOutside\",\n    value: function handleClickOutside(event) {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n        console.log('aaaa');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state4 = this.state,\n          isLoading = _this$state4.isLoading,\n          items = _this$state4.items,\n          careers = _this$state4.careers,\n          tinh_thphos = _this$state4.tinh_thphos,\n          openModal = _this$state4.openModal,\n          selects = _this$state4.selects,\n          limit = _this$state4.limit,\n          totalSize = _this$state4.totalSize,\n          page = _this$state4.page,\n          career_groups = _this$state4.career_groups,\n          searchParams = _this$state4.searchParams,\n          clearSelected = _this$state4.clearSelected;\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, isLoading ? React.createElement(\"div\", {\n        className: classes.placeholder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(Fade, {\n        in: true,\n        style: {\n          transitionDelay: '0ms'\n        },\n        unmountOnExit: true,\n        color: \"secondary\",\n        className: classes.loaded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(CircularProgress, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }))) : null, React.createElement(\"ul\", {\n        style: {\n          padding: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(Search, {\n        tinh_thphos: tinh_thphos,\n        career_groups: this.getCareerGroups(career_groups),\n        careers: careers,\n        onViewClicked: this.handleOpenModal.bind(this),\n        onCareerGroupChanged: this.handleCareerGroupChanged.bind(this),\n        careerChanged: this.handleCareerChanged.bind(this),\n        addressChanged: this.handleAddressChanged.bind(this),\n        salaryChanged: this.handleSalaryChanged.bind(this),\n        expChanged: this.handleExpChanged.bind(this),\n        textChanged: this.handleTextChanged.bind(this),\n        onSearchClicked: this.onSearchClicked.bind(this),\n        careerValue: searchParams.career,\n        careerGroupValue: searchParams.career_group,\n        addressValue: searchParams.address,\n        salaryValue: searchParams.salary,\n        expValue: searchParams.exp,\n        onInputKeyDown: this.onInputKeyDown.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(RecruimentTable, {\n        style: {\n          marginRight: 20\n        },\n        data: items,\n        totalSize: totalSize,\n        page: page,\n        rowsPerPage: limit,\n        handleChangePage: this.handleChangePage,\n        onHandleItemChecked: this.onHandleItemSelected,\n        clearSelected: clearSelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      })), React.createElement(RecrumentModal, {\n        isOpen: openModal,\n        recruments: selects,\n        closeModal: function closeModal() {\n          _this4.handleCloseModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RecuimentPage;\n}(Component);\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    button: {\n      margin: theme.spacing.unit * 2\n    },\n    placeholder: {\n      height: \"100%\",\n      width: \"100%\",\n      backgroundColor: 'rgba(0, 0, 0, 0.2)',\n      position: 'fixed',\n      zIndex: 999999999,\n      top: 0,\n      left: 0\n    },\n    loaded: {\n      height: 40,\n      width: 40,\n      top: \"50%\",\n      left: \"50%\",\n      marginTop: -20,\n      marginLeft: -20,\n      position: 'relative'\n    }\n  };\n};\n\nRecuimentPage.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(RecuimentPage);","map":{"version":3,"sources":["/home/ngadoan/Documents/my-app/src/components/recruimentPage/index.js"],"names":["React","Component","Search","RecrumentModal","RecruimentTable","PropTypes","Fade","withStyles","CircularProgress","RecuimentPage","props","getCareersInCareerGroup","state","searchParams","career_groups","careers","Number","career_group","forEach","item","concat","name","console","log","getCareerGroups","result","push","onHandleItemSelected","items","setState","selects","handleOpenModal","length","openModal","handleCloseModal","clearSelected","handleChangePage","event","index","page","offset","limit","getRecruimentsPerOffset","handleCareerGroupChanged","target","value","career","defaultValueCarrer","handleCareerChanged","handleAddressChanged","address","handleSalaryChanged","salary","handleExpChanged","exp","handleTextChanged","query","onSearchClicked","onInputKeyDown","e","key","bind","error","isLoading","tinh_thphos","limitSelect","totalSize","fetch","method","then","res","json","total_size","wrapperRef","contains","classes","placeholder","transitionDelay","loaded","padding","marginRight","styles","theme","root","display","flexDirection","alignItems","button","margin","spacing","unit","height","width","backgroundColor","position","zIndex","top","left","marginTop","marginLeft","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Search from \"../Search\";\nimport RecrumentModal from './recrumentModal'\nimport RecruimentTable from './recruiment-table'\nimport PropTypes from 'prop-types';\nimport Fade from '@material-ui/core/Fade';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass RecuimentPage extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleChangePage = this.handleChangePage.bind(this)\n    this.onHandleItemSelected = this.onHandleItemSelected.bind(this)\n\n    this.state = {\n      error: null,\n      isLoading: false,\n      items: [],\n      career_groups: [],\n      careers: [],\n      tinh_thphos: [],\n      selects: [],\n      limitSelect: 5,\n      openModal: false,\n      offset: 0,\n      limit: 10,\n      totalSize: 0,\n      page: 0,\n      searchParams: {\n        career_group: \"-1\",\n        career: \"-1\",\n        address: \"-1\",\n        salary: \"-1\",\n        exp: \"-1\",\n        query: \"\"\n      },\n      clearSelected: false\n    }\n\n  }\n\n  componentDidMount() {\n\n    this.getRecruimentsPerOffset()\n\n    fetch(\"http://127.0.0.1:5000/career_groups\", { method: \"GET\" })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            career_groups: result.result\n          }, () => {\n            this.setState({\n              careers: this.getCareersInCareerGroup()\n            })\n          });\n        }\n      );\n\n\n\n    fetch(\"http://127.0.0.1:5000/tinh_tpho\", { method: \"GET\" })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            tinh_thphos: result.result\n          });\n        }\n      );\n  }\n\n  getCareersInCareerGroup = () => {\n    var { searchParams, career_groups } = this.state\n    var careers = []\n    if (Number(searchParams.career_group) === -1) {\n      career_groups.forEach(item => {\n        careers = careers.concat(item.careers)\n      });\n    } else {\n      career_groups.forEach(item => {\n        if (searchParams.career_group === item.name) {\n          console.log(item.careers);\n          careers = careers.concat(item.careers)\n        }\n      });\n    }\n    return careers\n  }\n\n  getCareerGroups = (result) => {\n    var career_groups = []\n    result.forEach(item => {\n      career_groups.push(item.name)\n    });\n    return career_groups\n  }\n\n  getRecruimentsPerOffset() {\n    const { limit, page, searchParams } = this.state\n    const { career_group, career, address, salary, exp, query } = searchParams\n\n    this.setState({\n      isLoading: true\n    })\n\n    fetch(\"http://127.0.0.1:5000/search_recruitments?limit=\" + limit\n      + \"&page=\" + page\n      + \"&career_group=\" + (career_group !== '-1' ? career_group : '')\n      + \"&career=\" + (career !== '-1' ? career : '')\n      + \"&address=\" + (address !== '-1' ? address : '')\n      + \"&salary=\" + (salary !== '-1' ? salary : '')\n      + \"&exp=\" + (exp !== '-1' ? exp : '')\n      + \"&query=\" + query\n      , {\n        method: \"GET\"\n      })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoading: false,\n            items: result.result,\n            totalSize: result.total_size\n          });\n        },\n        error => {\n          this.setState({\n            isLoading: false,\n            error\n          });\n        }\n      );\n  }\n\n  onHandleItemSelected = (items) => {\n    this.setState({\n      selects: items\n    })\n\n  }\n\n  handleOpenModal = () => {\n    if (this.state.selects.length > 0) {\n      this.setState({\n        openModal: true,\n      });\n    }\n  };\n\n  handleCloseModal = () => {\n    this.setState({\n      openModal: false,\n      clearSelected: true\n    }, () => {\n      this.setState({\n        clearSelected: false\n      })\n\n    });\n  };\n\n  handleChangePage = (event, index) => {\n    const { page, offset, limit } = this.state\n    this.setState({\n      offset: page > index ? (offset - limit) : (limit + offset),\n      page: index\n    }, () => {\n      this.getRecruimentsPerOffset()\n    })\n  };\n\n  handleCareerGroupChanged = (event) => {\n    var { searchParams } = this.state\n\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        career_group: event.target.value,\n        career: '-1'\n      },\n      defaultValueCarrer: 'Tất cả'\n    }, () => {\n      this.setState({\n        careers: this.getCareersInCareerGroup()\n      })\n    })\n  }\n\n  handleCareerChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        career: event.target.value\n      },\n      defaultValueCarrer: event.target.value\n    })\n  }\n\n  handleAddressChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        address: event.target.value\n      }\n    })\n  }\n\n  handleSalaryChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        salary: event.target.value\n      }\n    })\n  }\n\n  handleExpChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        exp: event.target.value\n      }\n    })\n  }\n\n  handleTextChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        query: event.target.value\n      }\n    })\n  }\n\n  onSearchClicked = () => {\n    let { searchParams } = this.state\n    console.log('search params: ', searchParams);\n\n    this.setState({\n      page: 0\n    }, () => {\n      this.getRecruimentsPerOffset()\n    })\n\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      let { searchParams } = this.state\n      console.log('search params: ', searchParams);\n      this.getRecruimentsPerOffset()\n    }\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      console.log('aaaa')\n    }\n  }\n\n  render() {\n    const { isLoading, items, careers, tinh_thphos, openModal, selects, limit,\n      totalSize, page, career_groups, searchParams, clearSelected } = this.state;\n    const { classes } = this.props;\n    return (\n      <div>\n        {\n          isLoading ?\n            <div className={classes.placeholder}>\n              <Fade\n                in={true}\n                style={{\n                  transitionDelay: '0ms',\n                }}\n                unmountOnExit\n                color=\"secondary\"\n                className={classes.loaded}\n              >\n                <CircularProgress />\n              </Fade>\n            </div> : null\n        }\n\n        <ul style={{ padding: 0 }}>\n          <Search\n            tinh_thphos={tinh_thphos}\n            career_groups={this.getCareerGroups(career_groups)}\n            careers={careers}\n            onViewClicked={this.handleOpenModal.bind(this)}\n            onCareerGroupChanged={this.handleCareerGroupChanged.bind(this)}\n            careerChanged={this.handleCareerChanged.bind(this)}\n            addressChanged={this.handleAddressChanged.bind(this)}\n            salaryChanged={this.handleSalaryChanged.bind(this)}\n            expChanged={this.handleExpChanged.bind(this)}\n            textChanged={this.handleTextChanged.bind(this)}\n            onSearchClicked={this.onSearchClicked.bind(this)}\n            careerValue={searchParams.career}\n            careerGroupValue={searchParams.career_group}\n            addressValue={searchParams.address}\n            salaryValue={searchParams.salary}\n            expValue={searchParams.exp}\n            onInputKeyDown={this.onInputKeyDown.bind(this)}\n          />\n          <br />\n          <RecruimentTable\n            style={{ marginRight: 20 }}\n            data={items}\n            totalSize={totalSize}\n            page={page}\n            rowsPerPage={limit}\n            handleChangePage={this.handleChangePage}\n            onHandleItemChecked={this.onHandleItemSelected}\n            clearSelected={clearSelected}\n          />\n        </ul>\n        <RecrumentModal isOpen={openModal} recruments={selects}\n          closeModal={() => {\n            this.handleCloseModal()\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  button: {\n    margin: theme.spacing.unit * 2,\n  },\n  placeholder: {\n    height: `100%`,\n    width: `100%`,\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    position: 'fixed',\n    zIndex: 999999999,\n    top: 0,\n    left: 0,\n  },\n  loaded: {\n    height: 40,\n    width: 40,\n    top: `50%`,\n    left: `50%`,\n    marginTop: -20,\n    marginLeft: -20,\n    position: 'relative'\n  }\n});\n\nRecuimentPage.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(RecuimentPage);"]},"metadata":{},"sourceType":"module"}