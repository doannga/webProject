{"ast":null,"code":"import _objectSpread from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/ngadoan/Documents/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/ngadoan/Documents/my-app/src/components/recruimentPage/index.js\";\nimport React, { Component } from \"react\";\nimport Search from \"../Search\";\nimport RecrumentModal from './recrumentModal';\nimport RecruimentTable from './recruiment-table';\n\nvar RecuimentPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RecuimentPage, _Component);\n\n  function RecuimentPage(props) {\n    var _this;\n\n    _classCallCheck(this, RecuimentPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecuimentPage).call(this, props));\n\n    _this.getCareersInCareerGroup = function () {\n      var _this$state = _this.state,\n          searchParams = _this$state.searchParams,\n          career_groups = _this$state.career_groups;\n      var careers = [];\n\n      if (Number(searchParams.career_group) === -1) {\n        career_groups.forEach(function (item) {\n          careers = careers.concat(item.careers);\n        });\n      } else {\n        career_groups.forEach(function (item) {\n          if (searchParams.career_group === item.name) {\n            console.log(item.careers);\n            careers = careers.concat(item.careers);\n          }\n        });\n      }\n\n      return careers;\n    };\n\n    _this.getCareerGroups = function (result) {\n      var career_groups = [];\n      result.forEach(function (item) {\n        career_groups.push(item.name);\n      });\n      return career_groups;\n    };\n\n    _this.onHandleItemSelected = function (items) {\n      _this.setState({\n        selects: items\n      });\n    };\n\n    _this.handleOpenModal = function () {\n      if (_this.state.selects.length > 0) {\n        _this.setState({\n          openModal: true\n        });\n      }\n    };\n\n    _this.handleCloseModal = function () {\n      _this.setState({\n        openModal: false\n      });\n    };\n\n    _this.handleChangePage = function (event, index) {\n      var _this$state2 = _this.state,\n          page = _this$state2.page,\n          offset = _this$state2.offset,\n          limit = _this$state2.limit;\n\n      _this.setState({\n        offset: page > index ? offset - limit : limit + offset,\n        page: index\n      }, function () {\n        _this.getRecruimentsPerOffset();\n      });\n    };\n\n    _this.handleCareerGroupChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          career_group: event.target.value,\n          career: -1\n        }),\n        defaultValueCarrer: 'Tất cả'\n      }, function () {\n        _this.setState({\n          careers: _this.getCareersInCareerGroup()\n        });\n      });\n    };\n\n    _this.handleCareerChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          career: event.target.value\n        }),\n        defaultValueCarrer: event.target.value\n      });\n    };\n\n    _this.handleCityChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          city: event.target.value\n        })\n      });\n    };\n\n    _this.handleSalaryChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          salary: event.target.value\n        })\n      });\n    };\n\n    _this.handleExpChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          exp: event.target.value\n        })\n      });\n    };\n\n    _this.handleTextChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          text: event.target.value\n        })\n      });\n    };\n\n    _this.onSearchClicked = function () {\n      var searchParams = _this.state.searchParams;\n      console.log(searchParams);\n    };\n\n    _this.handleChangePage = _this.handleChangePage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onHandleItemSelected = _this.onHandleItemSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      career_groups: [],\n      careers: [],\n      tinh_thphos: [],\n      selects: [],\n      limitSelect: 5,\n      openModal: false,\n      offset: 0,\n      limit: 10,\n      totalSize: 0,\n      page: 0,\n      searchParams: {\n        career_group: -1,\n        career: -1,\n        city: -1,\n        salary: -1,\n        exp: -1,\n        text: \"\"\n      }\n    };\n    return _this;\n  }\n\n  _createClass(RecuimentPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getRecruimentsPerOffset(); // fetch(\"http://127.0.0.1:5000/career\", { method: \"GET\" })\n      //   .then(res => res.json())\n      //   .then(\n      //     result => {\n      //       console.log(\"result: \", result);\n      //       this.setState({\n      //         isLoaded: true,\n      //         careers: result.result\n      //       });\n      //     },\n      //     error => {\n      //       this.setState({\n      //         isLoaded: true,\n      //         error\n      //       });\n      //     }\n      //   );\n\n      fetch(\"http://127.0.0.1:5000/career_groups\", {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this2.setState({\n          isLoaded: true,\n          career_groups: result.result\n        }, function () {\n          _this2.setState({\n            careers: _this2.getCareersInCareerGroup()\n          });\n        });\n      }, function (error) {\n        _this2.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n      fetch(\"http://127.0.0.1:5000/tinh_tpho\", {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this2.setState({\n          isLoaded: true,\n          tinh_thphos: result.result\n        });\n      }, function (error) {\n        _this2.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"getRecruimentsPerOffset\",\n    value: function getRecruimentsPerOffset() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          limit = _this$state3.limit,\n          offset = _this$state3.offset;\n      fetch(\"http://127.0.0.1:5000/recruitments?limit=\" + limit + \"&offset=\" + offset, {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this3.setState({\n          isLoaded: true,\n          items: result.result,\n          totalSize: result.total_size\n        });\n      }, function (error) {\n        _this3.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state4 = this.state,\n          error = _this$state4.error,\n          isLoaded = _this$state4.isLoaded,\n          items = _this$state4.items,\n          careers = _this$state4.careers,\n          tinh_thphos = _this$state4.tinh_thphos,\n          openModal = _this$state4.openModal,\n          selects = _this$state4.selects,\n          limit = _this$state4.limit,\n          totalSize = _this$state4.totalSize,\n          page = _this$state4.page,\n          career_groups = _this$state4.career_groups,\n          searchParams = _this$state4.searchParams;\n\n      if (error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, \"Error: \", error.message);\n      } else if (!isLoaded) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, \"Loading...\");\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          style: {\n            padding: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, React.createElement(Search, {\n          tinh_thphos: tinh_thphos,\n          career_groups: this.getCareerGroups(career_groups),\n          careers: careers,\n          onViewClicked: this.handleOpenModal.bind(this),\n          onCareerGroupChanged: this.handleCareerGroupChanged.bind(this),\n          careerChanged: this.handleCareerChanged.bind(this),\n          cityChanged: this.handleCityChanged.bind(this),\n          salaryChanged: this.handleSalaryChanged.bind(this),\n          expChanged: this.handleExpChanged.bind(this),\n          textChanged: this.handleTextChanged.bind(this),\n          onSearchClicked: this.onSearchClicked.bind(this),\n          careerValue: searchParams.career,\n          careerGroupValue: searchParams.career_group,\n          cityValue: searchParams.city,\n          salaryValue: searchParams.salary,\n          expValue: searchParams.exp,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }), React.createElement(RecruimentTable, {\n          style: {\n            marginRight: 20\n          },\n          data: items,\n          totalSize: totalSize,\n          page: page,\n          rowsPerPage: limit,\n          handleChangePage: this.handleChangePage,\n          onHandleItemChecked: this.onHandleItemSelected,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        })), React.createElement(RecrumentModal, {\n          isOpen: openModal,\n          recruments: selects,\n          closeModal: function closeModal() {\n            _this4.handleCloseModal();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return RecuimentPage;\n}(Component);\n\nexport default RecuimentPage;","map":{"version":3,"sources":["/home/ngadoan/Documents/my-app/src/components/recruimentPage/index.js"],"names":["React","Component","Search","RecrumentModal","RecruimentTable","RecuimentPage","props","getCareersInCareerGroup","state","searchParams","career_groups","careers","Number","career_group","forEach","item","concat","name","console","log","getCareerGroups","result","push","onHandleItemSelected","items","setState","selects","handleOpenModal","length","openModal","handleCloseModal","handleChangePage","event","index","page","offset","limit","getRecruimentsPerOffset","handleCareerGroupChanged","target","value","career","defaultValueCarrer","handleCareerChanged","handleCityChanged","city","handleSalaryChanged","salary","handleExpChanged","exp","handleTextChanged","text","onSearchClicked","bind","error","isLoaded","tinh_thphos","limitSelect","totalSize","fetch","method","then","res","json","total_size","message","padding","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Search from \"../Search\";\nimport RecrumentModal from './recrumentModal'\nimport RecruimentTable from './recruiment-table'\n\nclass RecuimentPage extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleChangePage = this.handleChangePage.bind(this)\n    this.onHandleItemSelected = this.onHandleItemSelected.bind(this)\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      career_groups: [],\n      careers: [],\n      tinh_thphos: [],\n      selects: [],\n      limitSelect: 5,\n      openModal: false,\n      offset: 0,\n      limit: 10,\n      totalSize: 0,\n      page: 0,\n      searchParams: {\n        career_group: -1,\n        career: -1,\n        city: -1,\n        salary: -1,\n        exp: -1,\n        text: \"\"\n      }\n    }\n\n  }\n\n  componentDidMount() {\n\n    this.getRecruimentsPerOffset()\n\n    // fetch(\"http://127.0.0.1:5000/career\", { method: \"GET\" })\n    //   .then(res => res.json())\n    //   .then(\n    //     result => {\n    //       console.log(\"result: \", result);\n    //       this.setState({\n    //         isLoaded: true,\n    //         careers: result.result\n    //       });\n    //     },\n    //     error => {\n    //       this.setState({\n    //         isLoaded: true,\n    //         error\n    //       });\n    //     }\n    //   );\n\n    fetch(\"http://127.0.0.1:5000/career_groups\", { method: \"GET\" })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoaded: true,\n            career_groups: result.result\n          }, () => {\n            this.setState({\n              careers: this.getCareersInCareerGroup()\n            })\n          });\n        },\n        error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n\n\n\n    fetch(\"http://127.0.0.1:5000/tinh_tpho\", { method: \"GET\" })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoaded: true,\n            tinh_thphos: result.result\n          });\n        },\n        error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n  }\n\n  getCareersInCareerGroup = () => {\n    var {searchParams, career_groups} = this.state\n    var careers = []\n    if (Number(searchParams.career_group) === -1) {\n      career_groups.forEach(item => {\n        careers = careers.concat(item.careers)\n      });\n    } else {\n      career_groups.forEach(item => {\n        if (searchParams.career_group === item.name) {\n          console.log(item.careers);\n          careers = careers.concat(item.careers)\n        }\n      });\n    }\n    return careers\n  }\n\n  getCareerGroups = (result) => {\n    var career_groups = []\n    result.forEach(item => {\n      career_groups.push(item.name)\n    });\n    return career_groups\n  }\n\n  getRecruimentsPerOffset() {\n    const { limit, offset } = this.state\n\n    fetch(\"http://127.0.0.1:5000/recruitments?limit=\" + limit + \"&offset=\" + offset, {\n      method: \"GET\"\n    })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoaded: true,\n            items: result.result,\n            totalSize: result.total_size\n          });\n        },\n        error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n  }\n\n  onHandleItemSelected = (items) => {\n    this.setState({\n      selects: items\n    })\n\n  }\n\n  handleOpenModal = () => {\n    if (this.state.selects.length > 0) {\n      this.setState({ openModal: true });\n    }\n  };\n\n  handleCloseModal = () => {\n    this.setState({ openModal: false });\n  };\n\n  handleChangePage = (event, index) => {\n    const { page, offset, limit } = this.state\n    this.setState({\n      offset: page > index ? (offset - limit) : (limit + offset),\n      page: index\n    }, () => {\n      this.getRecruimentsPerOffset()\n    })\n  };\n\n  handleCareerGroupChanged = (event) => {\n    var { searchParams } = this.state\n    \n    this.setState({\n      searchParams: {\n        ...searchParams,\n        career_group: event.target.value,\n        career: -1\n      }, \n      defaultValueCarrer: 'Tất cả'\n    }, () => {\n      this.setState({\n        careers: this.getCareersInCareerGroup()\n      })\n    })\n  }\n\n  handleCareerChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        career: event.target.value\n      },\n      defaultValueCarrer: event.target.value\n    })\n  }\n\n  handleCityChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        city: event.target.value\n      }\n    })\n  }\n\n  handleSalaryChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        salary: event.target.value\n      }\n    })\n  }\n\n  handleExpChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        exp: event.target.value\n      }\n    })\n  }\n\n  handleTextChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        text: event.target.value\n      }\n    })\n  }\n\n  onSearchClicked = () => {\n    let { searchParams } = this.state\n    console.log(searchParams);\n\n  }\n\n  render() {\n    const { error, isLoaded, items, careers, tinh_thphos, openModal, selects, limit,\n      totalSize, page, career_groups, searchParams } = this.state;\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <div>Loading...</div>;\n    } else {\n      return (\n        <div>\n          <ul style={{ padding: 0 }}>\n            <Search\n              tinh_thphos={tinh_thphos}\n              career_groups={this.getCareerGroups(career_groups)}\n              careers={careers}\n              onViewClicked={this.handleOpenModal.bind(this)}\n              onCareerGroupChanged={this.handleCareerGroupChanged.bind(this)}\n              careerChanged={this.handleCareerChanged.bind(this)}\n              cityChanged={this.handleCityChanged.bind(this)}\n              salaryChanged={this.handleSalaryChanged.bind(this)}\n              expChanged={this.handleExpChanged.bind(this)}\n              textChanged={this.handleTextChanged.bind(this)}\n              onSearchClicked={this.onSearchClicked.bind(this)}\n              careerValue={searchParams.career}\n              careerGroupValue={searchParams.career_group}\n              cityValue={searchParams.city}\n              salaryValue={searchParams.salary}\n              expValue={searchParams.exp}\n            />\n            <br />\n            <RecruimentTable\n              style={{ marginRight: 20 }}\n              data={items}\n              totalSize={totalSize}\n              page={page}\n              rowsPerPage={limit}\n              handleChangePage={this.handleChangePage}\n              onHandleItemChecked={this.onHandleItemSelected}\n            />\n          </ul>\n          <RecrumentModal isOpen={openModal} recruments={selects} closeModal={() => {\n            this.handleCloseModal()\n          }} />\n        </div>\n      );\n    }\n  }\n}\nexport default RecuimentPage;\n"]},"metadata":{},"sourceType":"module"}