{"ast":null,"code":"import _objectSpread from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/ngadoan/Documents/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/ngadoan/Documents/web/src/components/recruimentPage/index.js\";\nimport React, { Component } from \"react\";\nimport Search from \"../Search\";\nimport RecrumentModal from './recrumentModal';\nimport RecruimentTable from './recruiment-table';\n\nvar RecuimentPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RecuimentPage, _Component);\n\n  function RecuimentPage(props) {\n    var _this;\n\n    _classCallCheck(this, RecuimentPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecuimentPage).call(this, props));\n\n    _this.getCareersInCareerGroup = function () {\n      var _this$state = _this.state,\n          searchParams = _this$state.searchParams,\n          career_groups = _this$state.career_groups;\n      var careers = [];\n\n      if (Number(searchParams.career_group) === -1) {\n        career_groups.forEach(function (item) {\n          careers = careers.concat(item.careers);\n        });\n      } else {\n        career_groups.forEach(function (item) {\n          if (searchParams.career_group === item.name) {\n            console.log(item.careers);\n            careers = careers.concat(item.careers);\n          }\n        });\n      }\n\n      return careers;\n    };\n\n    _this.getCareerGroups = function (result) {\n      var career_groups = [];\n      result.forEach(function (item) {\n        career_groups.push(item.name);\n      });\n      return career_groups;\n    };\n\n    _this.onHandleItemSelected = function (items) {\n      _this.setState({\n        selects: items\n      });\n    };\n\n    _this.handleOpenModal = function () {\n      if (_this.state.selects.length > 0) {\n        _this.setState({\n          openModal: true\n        });\n      }\n    };\n\n    _this.handleCloseModal = function () {\n      _this.setState({\n        openModal: false,\n        clearSelected: true\n      }, function () {\n        _this.setState({\n          clearSelected: false\n        });\n      });\n    };\n\n    _this.handleChangePage = function (event, index) {\n      var _this$state2 = _this.state,\n          page = _this$state2.page,\n          offset = _this$state2.offset,\n          limit = _this$state2.limit;\n\n      _this.setState({\n        offset: page > index ? offset - limit : limit + offset,\n        page: index\n      }, function () {\n        _this.getRecruimentsPerOffset();\n      });\n    };\n\n    _this.handleCareerGroupChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          career_group: event.target.value,\n          career: '-1'\n        }),\n        defaultValueCarrer: 'Tất cả'\n      }, function () {\n        _this.setState({\n          careers: _this.getCareersInCareerGroup()\n        });\n      });\n    };\n\n    _this.handleCareerChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          career: event.target.value\n        }),\n        defaultValueCarrer: event.target.value\n      });\n    };\n\n    _this.handleAddressChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          address: event.target.value\n        })\n      });\n    };\n\n    _this.handleSalaryChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          salary: event.target.value\n        })\n      });\n    };\n\n    _this.handleExpChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          exp: event.target.value\n        })\n      });\n    };\n\n    _this.handleTextChanged = function (event) {\n      var searchParams = _this.state.searchParams;\n\n      _this.setState({\n        searchParams: _objectSpread({}, searchParams, {\n          query: event.target.value\n        })\n      });\n    };\n\n    _this.onSearchClicked = function () {\n      var searchParams = _this.state.searchParams;\n      console.log('search params: ', searchParams);\n\n      _this.setState({\n        page: 0\n      }, function () {\n        _this.getRecruimentsPerOffset();\n      });\n    };\n\n    _this.onInputKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        var searchParams = _this.state.searchParams;\n        console.log('search params: ', searchParams);\n\n        _this.getRecruimentsPerOffset();\n      }\n    };\n\n    _this.handleChangePage = _this.handleChangePage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onHandleItemSelected = _this.onHandleItemSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      career_groups: [],\n      careers: [],\n      tinh_thphos: [],\n      selects: [],\n      limitSelect: 5,\n      openModal: false,\n      offset: 0,\n      limit: 10,\n      totalSize: 0,\n      page: 0,\n      searchParams: {\n        career_group: \"-1\",\n        career: \"-1\",\n        address: \"-1\",\n        salary: \"-1\",\n        exp: \"-1\",\n        query: \"\"\n      },\n      clearSelected: false\n    };\n    return _this;\n  }\n\n  _createClass(RecuimentPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getRecruimentsPerOffset(); // fetch(\"http://127.0.0.1:5000/career\", { method: \"GET\" })\n      //   .then(res => res.json())\n      //   .then(\n      //     result => {\n      //       console.log(\"result: \", result);\n      //       this.setState({\n      //         isLoaded: true,\n      //         careers: result.result\n      //       });\n      //     },\n      //     error => {\n      //       this.setState({\n      //         isLoaded: true,\n      //         error\n      //       });\n      //     }\n      //   );\n\n      fetch(\"http://127.0.0.1:5000/career_groups\", {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this2.setState({\n          isLoaded: true,\n          career_groups: result.result\n        }, function () {\n          _this2.setState({\n            careers: _this2.getCareersInCareerGroup()\n          });\n        });\n      }, function (error) {\n        _this2.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n      fetch(\"http://127.0.0.1:5000/tinh_tpho\", {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this2.setState({\n          isLoaded: true,\n          tinh_thphos: result.result\n        });\n      }, function (error) {\n        _this2.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"getRecruimentsPerOffset\",\n    value: function getRecruimentsPerOffset() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          limit = _this$state3.limit,\n          page = _this$state3.page,\n          searchParams = _this$state3.searchParams;\n      var career_group = searchParams.career_group,\n          career = searchParams.career,\n          address = searchParams.address,\n          salary = searchParams.salary,\n          exp = searchParams.exp,\n          query = searchParams.query;\n      fetch(\"http://127.0.0.1:5000/search_recruitments?limit=\" + limit + \"&page=\" + page + \"&career_group=\" + (career_group !== '-1' ? career_group : '') + \"&career=\" + (career !== '-1' ? career : '') + \"&address=\" + (address !== '-1' ? address : '') + \"&salary=\" + (salary !== '-1' ? salary : '') + \"&exp=\" + (exp !== '-1' ? exp : '') + \"&query=\" + query, {\n        method: \"GET\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"result: \", result);\n\n        _this3.setState({\n          isLoaded: true,\n          items: result.result,\n          totalSize: result.total_size\n        });\n      }, function (error) {\n        _this3.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"handleClickOutside\",\n    value: function handleClickOutside(event) {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n        console.log('aaaa');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state4 = this.state,\n          error = _this$state4.error,\n          isLoaded = _this$state4.isLoaded,\n          items = _this$state4.items,\n          careers = _this$state4.careers,\n          tinh_thphos = _this$state4.tinh_thphos,\n          openModal = _this$state4.openModal,\n          selects = _this$state4.selects,\n          limit = _this$state4.limit,\n          totalSize = _this$state4.totalSize,\n          page = _this$state4.page,\n          career_groups = _this$state4.career_groups,\n          searchParams = _this$state4.searchParams,\n          clearSelected = _this$state4.clearSelected;\n\n      if (error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }, \"Error: \", error.message);\n      } else if (!isLoaded) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 303\n          },\n          __self: this\n        }, \"Loading...\");\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          style: {\n            padding: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        }, React.createElement(Search, {\n          tinh_thphos: tinh_thphos,\n          career_groups: this.getCareerGroups(career_groups),\n          careers: careers,\n          onViewClicked: this.handleOpenModal.bind(this),\n          onCareerGroupChanged: this.handleCareerGroupChanged.bind(this),\n          careerChanged: this.handleCareerChanged.bind(this),\n          addressChanged: this.handleAddressChanged.bind(this),\n          salaryChanged: this.handleSalaryChanged.bind(this),\n          expChanged: this.handleExpChanged.bind(this),\n          textChanged: this.handleTextChanged.bind(this),\n          onSearchClicked: this.onSearchClicked.bind(this),\n          careerValue: searchParams.career,\n          careerGroupValue: searchParams.career_group,\n          addressValue: searchParams.address,\n          salaryValue: searchParams.salary,\n          expValue: searchParams.exp,\n          onInputKeyDown: this.onInputKeyDown.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }), React.createElement(RecruimentTable, {\n          style: {\n            marginRight: 20\n          },\n          data: items,\n          totalSize: totalSize,\n          page: page,\n          rowsPerPage: limit,\n          handleChangePage: this.handleChangePage,\n          onHandleItemChecked: this.onHandleItemSelected,\n          clearSelected: clearSelected,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328\n          },\n          __self: this\n        })), React.createElement(RecrumentModal, {\n          isOpen: openModal,\n          recruments: selects,\n          closeModal: function closeModal() {\n            _this4.handleCloseModal();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return RecuimentPage;\n}(Component);\n\nexport default RecuimentPage;","map":{"version":3,"sources":["/home/ngadoan/Documents/web/src/components/recruimentPage/index.js"],"names":["React","Component","Search","RecrumentModal","RecruimentTable","RecuimentPage","props","getCareersInCareerGroup","state","searchParams","career_groups","careers","Number","career_group","forEach","item","concat","name","console","log","getCareerGroups","result","push","onHandleItemSelected","items","setState","selects","handleOpenModal","length","openModal","handleCloseModal","clearSelected","handleChangePage","event","index","page","offset","limit","getRecruimentsPerOffset","handleCareerGroupChanged","target","value","career","defaultValueCarrer","handleCareerChanged","handleAddressChanged","address","handleSalaryChanged","salary","handleExpChanged","exp","handleTextChanged","query","onSearchClicked","onInputKeyDown","e","key","bind","error","isLoaded","tinh_thphos","limitSelect","totalSize","fetch","method","then","res","json","total_size","wrapperRef","contains","message","padding","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Search from \"../Search\";\nimport RecrumentModal from './recrumentModal'\nimport RecruimentTable from './recruiment-table'\n\nclass RecuimentPage extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleChangePage = this.handleChangePage.bind(this)\n    this.onHandleItemSelected = this.onHandleItemSelected.bind(this)\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      career_groups: [],\n      careers: [],\n      tinh_thphos: [],\n      selects: [],\n      limitSelect: 5,\n      openModal: false,\n      offset: 0,\n      limit: 10,\n      totalSize: 0,\n      page: 0,\n      searchParams: {\n        career_group: \"-1\",\n        career: \"-1\",\n        address: \"-1\",\n        salary: \"-1\",\n        exp: \"-1\",\n        query: \"\"\n      },\n      clearSelected: false\n    }\n\n  }\n\n  componentDidMount() {\n\n    this.getRecruimentsPerOffset()\n\n    // fetch(\"http://127.0.0.1:5000/career\", { method: \"GET\" })\n    //   .then(res => res.json())\n    //   .then(\n    //     result => {\n    //       console.log(\"result: \", result);\n    //       this.setState({\n    //         isLoaded: true,\n    //         careers: result.result\n    //       });\n    //     },\n    //     error => {\n    //       this.setState({\n    //         isLoaded: true,\n    //         error\n    //       });\n    //     }\n    //   );\n\n    fetch(\"http://127.0.0.1:5000/career_groups\", { method: \"GET\" })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoaded: true,\n            career_groups: result.result\n          }, () => {\n            this.setState({\n              careers: this.getCareersInCareerGroup()\n            })\n          });\n        },\n        error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n\n\n\n    fetch(\"http://127.0.0.1:5000/tinh_tpho\", { method: \"GET\" })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoaded: true,\n            tinh_thphos: result.result\n          });\n        },\n        error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n  }\n\n  getCareersInCareerGroup = () => {\n    var { searchParams, career_groups } = this.state\n    var careers = []\n    if (Number(searchParams.career_group) === -1) {\n      career_groups.forEach(item => {\n        careers = careers.concat(item.careers)\n      });\n    } else {\n      career_groups.forEach(item => {\n        if (searchParams.career_group === item.name) {\n          console.log(item.careers);\n          careers = careers.concat(item.careers)\n        }\n      });\n    }\n    return careers\n  }\n\n  getCareerGroups = (result) => {\n    var career_groups = []\n    result.forEach(item => {\n      career_groups.push(item.name)\n    });\n    return career_groups\n  }\n\n  getRecruimentsPerOffset() {\n    const { limit, page, searchParams } = this.state\n    const { career_group, career, address, salary, exp, query } = searchParams\n\n    fetch(\"http://127.0.0.1:5000/search_recruitments?limit=\" + limit\n      + \"&page=\" + page\n      + \"&career_group=\" + (career_group !== '-1' ? career_group : '')\n      + \"&career=\" + (career !== '-1' ? career : '')\n      + \"&address=\" + (address !== '-1' ? address : '')\n      + \"&salary=\" + (salary !== '-1' ? salary : '')\n      + \"&exp=\" + (exp !== '-1' ? exp : '')\n      + \"&query=\" + query\n      , {\n        method: \"GET\"\n      })\n      .then(res => res.json())\n      .then(\n        result => {\n          console.log(\"result: \", result);\n          this.setState({\n            isLoaded: true,\n            items: result.result,\n            totalSize: result.total_size\n          });\n        },\n        error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n  }\n\n  onHandleItemSelected = (items) => {\n    this.setState({\n      selects: items\n    })\n\n  }\n\n  handleOpenModal = () => {\n    if (this.state.selects.length > 0) {\n      this.setState({ \n        openModal: true,\n      });\n    }\n  };\n\n  handleCloseModal = () => {\n    this.setState({ \n      openModal: false,\n      clearSelected: true\n    }, () => {\n        this.setState({\n          clearSelected: false\n        })\n      \n    });\n  };\n\n  handleChangePage = (event, index) => {\n    const { page, offset, limit } = this.state\n    this.setState({\n      offset: page > index ? (offset - limit) : (limit + offset),\n      page: index\n    }, () => {\n      this.getRecruimentsPerOffset()\n    })\n  };\n\n  handleCareerGroupChanged = (event) => {\n    var { searchParams } = this.state\n\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        career_group: event.target.value,\n        career: '-1'\n      },\n      defaultValueCarrer: 'Tất cả'\n    }, () => {\n      this.setState({\n        careers: this.getCareersInCareerGroup()\n      })\n    })\n  }\n\n  handleCareerChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        career: event.target.value\n      },\n      defaultValueCarrer: event.target.value\n    })\n  }\n\n  handleAddressChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        address: event.target.value\n      }\n    })\n  }\n\n  handleSalaryChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        salary: event.target.value\n      }\n    })\n  }\n\n  handleExpChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        exp: event.target.value\n      }\n    })\n  }\n\n  handleTextChanged = (event) => {\n    var { searchParams } = this.state\n    this.setState({\n      searchParams: {\n        ...searchParams,\n        query: event.target.value\n      }\n    })\n  }\n\n  onSearchClicked = () => {\n    let { searchParams } = this.state\n    console.log('search params: ', searchParams);\n\n    this.setState({\n      page: 0\n    }, () => {\n      this.getRecruimentsPerOffset()\n    })\n\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      let { searchParams } = this.state\n      console.log('search params: ', searchParams);\n      this.getRecruimentsPerOffset()\n    }\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      console.log('aaaa')\n    }\n  }\n\n  render() {\n    const { error, isLoaded, items, careers, tinh_thphos, openModal, selects, limit,\n      totalSize, page, career_groups, searchParams, clearSelected } = this.state;\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <div>Loading...</div>;\n    } else {\n      return (\n        <div>\n          <ul style={{ padding: 0 }}>\n            <Search\n              tinh_thphos={tinh_thphos}\n              career_groups={this.getCareerGroups(career_groups)}\n              careers={careers}\n              onViewClicked={this.handleOpenModal.bind(this)}\n              onCareerGroupChanged={this.handleCareerGroupChanged.bind(this)}\n              careerChanged={this.handleCareerChanged.bind(this)}\n              addressChanged={this.handleAddressChanged.bind(this)}\n              salaryChanged={this.handleSalaryChanged.bind(this)}\n              expChanged={this.handleExpChanged.bind(this)}\n              textChanged={this.handleTextChanged.bind(this)}\n              onSearchClicked={this.onSearchClicked.bind(this)}\n              careerValue={searchParams.career}\n              careerGroupValue={searchParams.career_group}\n              addressValue={searchParams.address}\n              salaryValue={searchParams.salary}\n              expValue={searchParams.exp}\n              onInputKeyDown={this.onInputKeyDown.bind(this)}\n            />\n            <br />\n            <RecruimentTable\n              style={{ marginRight: 20 }}\n              data={items}\n              totalSize={totalSize}\n              page={page}\n              rowsPerPage={limit}\n              handleChangePage={this.handleChangePage}\n              onHandleItemChecked={this.onHandleItemSelected}\n              clearSelected={clearSelected}\n            />\n          </ul>\n          <RecrumentModal isOpen={openModal} recruments={selects} \n            closeModal={() => {\n              this.handleCloseModal()\n            }} \n          />\n        </div>\n      );\n    }\n  }\n}\nexport default RecuimentPage;\n"]},"metadata":{},"sourceType":"module"}